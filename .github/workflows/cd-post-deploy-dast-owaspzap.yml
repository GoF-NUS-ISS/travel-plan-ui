on:
  push:
    branches: [ master ]

name: Post Deployment DAST OWASP ZAP Execution

jobs:
  deploy:
    name: Run OWASP ZAP DAST tool
    runs-on: ubuntu-latest

    steps:

    - name: Wait for URL to be responsive
      uses: nev7n/wait_for_response@v1
      with:
        url: "http://alb-travel-app-451787435.us-east-1.elb.amazonaws.com:4200"
        responseCode: 200
        timeout: 120000
        interval: 10000

    - name: OWASP ZAP Baseline Scan DAST
      uses: zaproxy/action-baseline@v0.3.0
      with:
        target: "http://alb-travel-app-451787435.us-east-1.elb.amazonaws.com:4200"